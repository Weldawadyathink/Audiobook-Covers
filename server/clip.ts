// import {
//   AutoProcessor,
//   AutoTokenizer,
//   CLIPTextModelWithProjection,
//   CLIPVisionModelWithProjection,
//   type PreTrainedModel,
//   type PreTrainedTokenizer,
//   type Processor,
//   RawImage,
// } from "@huggingface/transformers";
import { type ModelOptions, models } from "./models.ts";

// const global = globalThis as unknown as {
//   models: {
//     [K in ModelOptions]?: {
//       tokenizer: undefined | PreTrainedTokenizer;
//       textModel: undefined | PreTrainedModel;
//       processor: undefined | Processor;
//       visionModel: undefined | PreTrainedModel;
//     };
//   };
// };

function getGlobalModels(modelName: ModelOptions) {
  // if (!global.models) {
  //   global.models = {};
  // }
  // if (!global.models[modelName]) {
  //   global.models[modelName] = {
  //     tokenizer: undefined,
  //     textModel: undefined,
  //     processor: undefined,
  //     visionModel: undefined,
  //   };
  // }
  // return global.models[modelName];
}

// IMPORTANT: If running many embeddings in parallel, call preloadModel to prevent multiple copies
// being loaded into memory
// export async function getTextModel(modelName: ModelOptions): Promise<{
//   tokenizer: PreTrainedTokenizer;
//   textModel: PreTrainedModel;
// }> {
//   if (!(modelName in models)) {
//     throw new Error("Model name not recognized");
//   }
//   const modelToLoad = models[modelName].localPath ||
//     models[modelName].huggingfaceId;
//   let { tokenizer, textModel } = getGlobalModels(modelName);
//
//   if (!tokenizer) {
//     tokenizer = await AutoTokenizer.from_pretrained(modelToLoad);
//     global.models[modelName]!.tokenizer = tokenizer;
//     console.log(`Loaded tokenizer for ${modelName} into memory`);
//   }
//   if (!textModel) {
//     textModel = await CLIPTextModelWithProjection.from_pretrained(modelToLoad, {
//       dtype: "fp32",
//     });
//     global.models[modelName]!.textModel = textModel;
//     console.log(`Loaded text model for ${modelName} into memory`);
//   }
//   return {
//     tokenizer,
//     textModel,
//   };
// }

// IMPORTANT: If running many embeddings in parallel, call preloadModel to prevent multiple copies
// being loaded into memory
// export async function getVisionModel(modelName: ModelOptions): Promise<{
//   processor: Processor;
//   visionModel: PreTrainedModel;
// }> {
//   if (!(modelName in models)) {
//     throw new Error("Model name not recognized");
//   }
//   const modelToLoad = models[modelName].localPath ||
//     models[modelName].huggingfaceId;
//
//   let { processor, visionModel } = getGlobalModels(modelName);
//   if (!processor) {
//     processor = await AutoProcessor.from_pretrained(
//       modelToLoad,
//       {},
//     );
//     global.models[modelName]!.processor = processor;
//     console.log(`Loaded image processor for ${modelName} into memory`);
//   }
//   if (!visionModel) {
//     visionModel = await CLIPVisionModelWithProjection.from_pretrained(
//       modelToLoad,
//       { dtype: "fp32" },
//     );
//     global.models[modelName]!.visionModel = visionModel;
//     console.log(`Loaded vision model for ${modelName} into memory`);
//   }
//   return {
//     processor,
//     visionModel,
//   };
// }

export async function getImageEmbedding(
  imageLocation: string,
  modelName: ModelOptions,
) {
  // const image = await RawImage.read(imageLocation);
  // const { processor, visionModel } = await getVisionModel(modelName);
  // const imageInputs = await processor(image);
  // const { image_embeds } = await visionModel(imageInputs);
  // return [...image_embeds.normalize().data] as Array<number>;
  return [
    0.020356129854917526,
    0.04589816927909851,
    -0.002484985627233982,
    0.0020830498542636633,
    0.02402539737522602,
    0.007993337698280811,
    0.018426835536956787,
    -0.0008149426430463791,
    -0.027012674137949944,
    -0.023789813742041588,
    0.01638280786573887,
    0.10099182277917862,
    0.02360539324581623,
    -0.03571794927120209,
    -0.04509206488728523,
    -0.016481317579746246,
    0.014438916929066181,
    -0.006832928862422705,
    -0.0022711227647960186,
    -0.005432841833680868,
    0.0031774782110005617,
    0.0035816431045532227,
    0.05780531093478203,
    -0.004268032032996416,
    -0.029122043401002884,
    -0.014876817353069782,
    -0.022271238267421722,
    0.02968960627913475,
    0.0077104466035962105,
    0.03412891551852226,
    -0.021079620346426964,
    -0.03201529011130333,
    -0.02905488759279251,
    -0.029970675706863403,
    -0.017246082425117493,
    0.021374670788645744,
    -0.0011307902168482542,
    -0.014891562983393669,
    0.018053840845823288,
    -0.06809978932142258,
    0.00912721361964941,
    0.041347701102495193,
    -0.030284464359283447,
    0.06723365932703018,
    -0.022588908672332764,
    0.034784216433763504,
    0.003141546854749322,
    0.010285502299666405,
    -0.005770202726125717,
    0.02966640330851078,
    0.025317754596471786,
    0.032780058681964874,
    -0.03016316518187523,
    -0.0005374225438572466,
    -0.01332184113562107,
    0.03179743513464928,
    0.01632443070411682,
    0.015081041492521763,
    -0.0022262639831751585,
    -0.01169272605329752,
    0.02562139555811882,
    0.025177231058478355,
    0.010980362072587013,
    -0.005067860241979361,
    0.03301728889346123,
    0.04345051199197769,
    -0.023044129833579063,
    0.010199107229709625,
    0.017480498179793358,
    0.0056312717497348785,
    -0.034822046756744385,
    0.009955265559256077,
    -0.005881979130208492,
    0.026012282818555832,
    -0.026378381997346878,
    0.02389131300151348,
    0.008028010837733746,
    -0.018670013174414635,
    0.004767315927892923,
    0.025633875280618668,
    0.027929844334721565,
    -0.0077157169580459595,
    -0.01273947861045599,
    -0.0027844421565532684,
    0.016138723120093346,
    0.02285892143845558,
    -0.00631966907531023,
    -0.02220018580555916,
    -0.02994166500866413,
    -0.009736970067024231,
    0.08353399485349655,
    0.008574409410357475,
    -0.007488801144063473,
    0.031635552644729614,
    0.013524251990020275,
    -0.0033690331038087606,
    -0.019253013655543327,
    -0.024862242862582207,
    -0.0027882070280611515,
    -0.044674769043922424,
    0.011476864106953144,
    -0.056724078953266144,
    -0.007040714845061302,
    0.007419184781610966,
    0.08014048635959625,
    0.009795996360480785,
    0.011365900747478008,
    -0.03392559662461281,
    -0.009882023558020592,
    -0.059401534497737885,
    0.04829884320497513,
    -0.01812785118818283,
    -0.028664281591773033,
    -0.03509654477238655,
    0.07013403624296188,
    0.04584294185042381,
    0.014156314544379711,
    -0.021335553377866745,
    0.055982526391744614,
    -0.03641488403081894,
    0.021475624293088913,
    0.02828313782811165,
    0.07515907287597656,
    0.02309323288500309,
    -0.02482723630964756,
    0.025612851604819298,
    -0.027681920677423477,
    -0.017110321670770645,
    -0.0013274577213451266,
    0.00621031504124403,
    -0.00965629518032074,
    0.013388905674219131,
    -0.023007318377494812,
    0.044734884053468704,
    -0.01753484643995762,
    -0.011397752910852432,
    0.05171021446585655,
    0.014278845861554146,
    -0.018284518271684647,
    0.013994112610816956,
    -0.0017606753390282393,
    -0.012443452142179012,
    0.023994630202651024,
    0.010704671032726765,
    -0.0072905318811535835,
    0.006349066272377968,
    -0.0657520666718483,
    -0.01723077893257141,
    0.037711042910814285,
    0.0059791188687086105,
    0.03449691832065582,
    -0.0035237823612987995,
    0.01100719254463911,
    -0.021239567548036575,
    -0.03482864052057266,
    0.01344599574804306,
    -0.039179522544145584,
    -0.022759685292840004,
    0.006484614219516516,
    0.0028758628759533167,
    0.05114948749542236,
    0.015134034678339958,
    -0.013416161760687828,
    -0.012713299132883549,
    -0.011823941953480244,
    0.010000052861869335,
    0.025491664186120033,
    0.007481037639081478,
    0.010407018475234509,
    -0.00003492357427603565,
    0.005478284787386656,
    -0.008798856288194656,
    -0.03087942861020565,
    -0.01903599128127098,
    -0.13376547396183014,
    -0.03279629722237587,
    0.010101058520376682,
    0.020362287759780884,
    0.019855940714478493,
    0.01261645182967186,
    -0.0312999002635479,
    -0.04447781667113304,
    -0.029486188665032387,
    -0.027310719713568687,
    -0.05730614438652992,
    0.02623618394136429,
    -0.04794205352663994,
    0.025519559159874916,
    -0.007466648239642382,
    0.005933987908065319,
    -0.010922391898930073,
    -0.020365620031952858,
    0.0515684075653553,
    -0.022805796936154366,
    0.029080292209982872,
    0.014644570648670197,
    0.021400904282927513,
    -0.025250516831874847,
    -0.03554393723607063,
    0.0016702789580449462,
    -0.023499758914113045,
    -0.017987504601478577,
    0.0020480600651353598,
    -0.03799885883927345,
    -0.006683998741209507,
    -0.03660124912858009,
    0.022644687443971634,
    0.0834549069404602,
    0.023468172177672386,
    -0.006819538772106171,
    0.061715565621852875,
    0.028194885700941086,
    -0.004654956050217152,
    -0.010003957897424698,
    -0.00005061341289547272,
    -0.0023757966700941324,
    -0.05553790554404259,
    0.02604002133011818,
    0.0036660139448940754,
    -0.026173489168286324,
    0.003491978393867612,
    -0.007679200265556574,
    -0.01197785884141922,
    -0.0020945824217051268,
    0.00029760971665382385,
    -0.011862729676067829,
    -0.015706747770309448,
    -0.04017418250441551,
    0.015279495157301426,
    0.003833705559372902,
    0.00947582721710205,
    -0.047055382281541824,
    0.029943468049168587,
    0.021550782024860382,
    0.009478166699409485,
    -0.0032884269021451473,
    -0.026789790019392967,
    0.023221688345074654,
    -0.02318638376891613,
    0.00031856188434176147,
    -0.04192010313272476,
    0.03448307886719704,
    0.06530343741178513,
    0.018829867243766785,
    -0.01137002557516098,
    -0.01353366021066904,
    0.004584462381899357,
    -0.027433229610323906,
    0.043646086007356644,
    -0.00006318911619018763,
    -0.06711689382791519,
    -0.06013110280036926,
    0.01665198802947998,
    0.015241812914609909,
    -0.03894742205739021,
    0.000017173395463032648,
    0.06673330068588257,
    -0.013314434327185154,
    0.04036800190806389,
    0.028693774715065956,
    0.08326878398656845,
    -0.02462153695523739,
    -0.012117038480937481,
    -0.025405865162611008,
    -0.1126750186085701,
    -0.032398492097854614,
    -0.02293866127729416,
    0.010238444432616234,
    0.01080967579036951,
    0.040943045169115067,
    -0.009326395578682423,
    -0.03753041476011276,
    0.005021507851779461,
    0.021334750577807426,
    -0.018623538315296173,
    0.022765519097447395,
    0.028013847768306732,
    0.04071340337395668,
    0.020203744992613792,
    0.03737592697143555,
    0.052277978509664536,
    0.0373358316719532,
    0.027802705764770508,
    -0.023612186312675476,
    -0.03401472792029381,
    0.008234468288719654,
    -0.056131307035684586,
    0.008252984844148159,
    -0.03877267614006996,
    0.012900834903120995,
    -0.020700400695204735,
    0.03178335353732109,
    0.00817579310387373,
    -0.03244250640273094,
    0.009934162721037865,
    -0.01852734014391899,
    0.002894812962040305,
    0.005801774095743895,
    0.02778705023229122,
    0.007685168646275997,
    0.010199387557804585,
    -0.0008301089983433485,
    0.006182811688631773,
    0.023410337045788765,
    -0.013643192127346992,
    -0.02525225467979908,
    0.028885051608085632,
    0.00887671485543251,
    0.0114450603723526,
    -0.04033012315630913,
    -0.007514965254813433,
    0.011392956599593163,
    -0.5166805982589722,
    0.0021063208114355803,
    -0.007227636873722076,
    0.04257114231586456,
    0.011478927917778492,
    0.004652619361877441,
    0.040051721036434174,
    0.04745771735906601,
    -0.030233539640903473,
    0.010182659141719341,
    -0.013994313776493073,
    0.006542366463690996,
    -0.015234527178108692,
    -0.015380694530904293,
    -0.008631723932921886,
    -0.004133761394768953,
    0.02658991329371929,
    0.03586640581488609,
    -0.03315277397632599,
    0.007076135370880365,
    0.00568366190418601,
    0.03415358066558838,
    -0.043676022440195084,
    0.01247485727071762,
    0.03498683497309685,
    0.008138870820403099,
    0.0046898857690393925,
    0.002929125912487507,
    0.013556165620684624,
    0.006673017051070929,
    0.012827339582145214,
    -0.0015583086060360074,
    -0.006598080042749643,
    -0.023970549926161766,
    -0.0043109022080898285,
    0.03471841290593147,
    0.03837297856807709,
    -0.025150708854198456,
    0.030504196882247925,
    0.07396669685840607,
    0.04317791759967804,
    0.019098736345767975,
    0.028362659737467766,
    0.010390084236860275,
    -0.034811317920684814,
    0.13778619468212128,
    -0.020471910014748573,
    -0.0028044728096574545,
    -0.014835372567176819,
    0.013653136789798737,
    0.013671132735908031,
    -0.5177797675132751,
    -0.0468759760260582,
    -0.03942166268825531,
    0.05531357601284981,
    0.031671833246946335,
    0.011121980845928192,
    -0.047377809882164,
    0.03648669272661209,
    0.02171073853969574,
    -0.010617761872708797,
    0.003530799876898527,
    -0.007345391437411308,
    -0.016448359936475754,
    -0.000343320076353848,
    -0.00923861749470234,
    -0.04291892796754837,
    0.03432903811335564,
    0.01290331594645977,
    -0.07471118122339249,
    -0.0054681128822267056,
    0.0020480346865952015,
    -0.0018406868912279606,
    0.06044364348053932,
    0.03727881610393524,
    -0.013355941511690617,
    -0.04183478280901909,
    -0.0759548544883728,
    0.03265131637454033,
    0.11431452631950378,
    0.019895246252417564,
    0.028659997507929802,
    -0.016828084364533424,
    -0.05429006367921829,
    0.03005354478955269,
    -0.012176520191133022,
    0.007853548042476177,
    -0.008210666477680206,
    -0.03595183417201042,
    -0.005173762794584036,
    -0.018706878647208214,
    -0.025629783049225807,
    -0.009239324368536472,
    -0.012316297739744186,
    -0.02745678462088108,
    0.01018271129578352,
    0.024132803082466125,
    0.0374600812792778,
    -0.010335041210055351,
    0.027571208775043488,
    0.015795232728123665,
    -0.021556371822953224,
    -0.021324660629034042,
    0.017973748967051506,
    -0.016899099573493004,
    -0.00103299121838063,
    0.04236473888158798,
    -0.017182588577270508,
    0.02425081841647625,
    -0.014773812144994736,
    0.03656081110239029,
    0.003511951770633459,
    -0.043212540447711945,
    -0.015790294855833054,
    -0.030645377933979034,
    -0.004451989196240902,
    0.03040633723139763,
    0.01632235385477543,
    -0.011913620866835117,
    -0.00812787190079689,
    0.005444468930363655,
    -0.01289100106805563,
    0.02892724610865116,
    0.024938907474279404,
    -0.015983400866389275,
    0.03856213763356209,
    0.010078311897814274,
    -0.020197207108139992,
    0.00702672591432929,
    -0.010204050689935684,
    0.022665373980998993,
    0.029799489304423332,
    -0.0215110182762146,
    0.0018780040554702282,
    -0.011411279439926147,
    0.008374183438718319,
    0.020149199292063713,
    0.0670870840549469,
    0.04782012104988098,
    -0.010944126173853874,
    -0.02156958356499672,
    0.014550751075148582,
    -0.0025544401723891497,
    -0.06599319726228714,
    0.046437859535217285,
    -0.02725774236023426,
    -0.019396036863327026,
    0.01646474190056324,
    0.02106468193233013,
    0.006304173730313778,
    -0.004906030837446451,
    0.033905450254678726,
    -0.02669609896838665,
    0.07205513119697571,
    0.031366944313049316,
    0.012041310779750347,
    -0.004961270838975906,
    0.0524749718606472,
    0.014619890600442886,
    -0.0211497750133276,
    0.01777694560587406,
    0.00370989041402936,
    0.02337757684290409,
    -0.03845307603478432,
    -0.008889475837349892,
    0.0396849624812603,
    0.03422214463353157,
    -0.009893231093883514,
    0.007183610927313566,
    -0.0065202913247048855,
    -0.04717632010579109,
    -0.010841467417776585,
    -0.005984473042190075,
    -0.031242208555340767,
    0.04345695301890373,
    -0.025389233604073524,
    -0.014266492798924446,
    0.001598227652721107,
    0.002905547386035323,
    0.008721882477402687,
    0.05227603763341904,
    -0.005291008856147528,
    0.010452129878103733,
    0.02677205577492714,
    -0.010830894112586975,
    -0.04726795852184296,
    -0.017638633027672768,
    0.013056641444563866,
    -0.014485075138509274,
    0.014338802546262741,
    -0.026976492255926132,
    -0.0038960513193160295,
    -0.0034580444917082787,
    0.03258621320128441,
    -0.010707404464483261,
    0.0127020925283432,
    0.012290826998651028,
    0.00618883827701211,
    -0.019134053960442543,
    -0.02831663005053997,
  ];
}

// export async function preloadModel(modelName: ModelOptions) {
//   await getVisionModel(modelName);
//   await getTextModel(modelName);
// }

export async function getTextEmbedding(
  input: string,
  modelName: ModelOptions,
) {
  // const { tokenizer, textModel } = await getTextModel(modelName);
  // const tokens = tokenizer(input, { padding: "max_length", truncation: true });
  // const { text_embeds } = await textModel(tokens);
  // return [...text_embeds.normalize().data] as Array<number>;
  return [
    0.020356129854917526,
    0.04589816927909851,
    -0.002484985627233982,
    0.0020830498542636633,
    0.02402539737522602,
    0.007993337698280811,
    0.018426835536956787,
    -0.0008149426430463791,
    -0.027012674137949944,
    -0.023789813742041588,
    0.01638280786573887,
    0.10099182277917862,
    0.02360539324581623,
    -0.03571794927120209,
    -0.04509206488728523,
    -0.016481317579746246,
    0.014438916929066181,
    -0.006832928862422705,
    -0.0022711227647960186,
    -0.005432841833680868,
    0.0031774782110005617,
    0.0035816431045532227,
    0.05780531093478203,
    -0.004268032032996416,
    -0.029122043401002884,
    -0.014876817353069782,
    -0.022271238267421722,
    0.02968960627913475,
    0.0077104466035962105,
    0.03412891551852226,
    -0.021079620346426964,
    -0.03201529011130333,
    -0.02905488759279251,
    -0.029970675706863403,
    -0.017246082425117493,
    0.021374670788645744,
    -0.0011307902168482542,
    -0.014891562983393669,
    0.018053840845823288,
    -0.06809978932142258,
    0.00912721361964941,
    0.041347701102495193,
    -0.030284464359283447,
    0.06723365932703018,
    -0.022588908672332764,
    0.034784216433763504,
    0.003141546854749322,
    0.010285502299666405,
    -0.005770202726125717,
    0.02966640330851078,
    0.025317754596471786,
    0.032780058681964874,
    -0.03016316518187523,
    -0.0005374225438572466,
    -0.01332184113562107,
    0.03179743513464928,
    0.01632443070411682,
    0.015081041492521763,
    -0.0022262639831751585,
    -0.01169272605329752,
    0.02562139555811882,
    0.025177231058478355,
    0.010980362072587013,
    -0.005067860241979361,
    0.03301728889346123,
    0.04345051199197769,
    -0.023044129833579063,
    0.010199107229709625,
    0.017480498179793358,
    0.0056312717497348785,
    -0.034822046756744385,
    0.009955265559256077,
    -0.005881979130208492,
    0.026012282818555832,
    -0.026378381997346878,
    0.02389131300151348,
    0.008028010837733746,
    -0.018670013174414635,
    0.004767315927892923,
    0.025633875280618668,
    0.027929844334721565,
    -0.0077157169580459595,
    -0.01273947861045599,
    -0.0027844421565532684,
    0.016138723120093346,
    0.02285892143845558,
    -0.00631966907531023,
    -0.02220018580555916,
    -0.02994166500866413,
    -0.009736970067024231,
    0.08353399485349655,
    0.008574409410357475,
    -0.007488801144063473,
    0.031635552644729614,
    0.013524251990020275,
    -0.0033690331038087606,
    -0.019253013655543327,
    -0.024862242862582207,
    -0.0027882070280611515,
    -0.044674769043922424,
    0.011476864106953144,
    -0.056724078953266144,
    -0.007040714845061302,
    0.007419184781610966,
    0.08014048635959625,
    0.009795996360480785,
    0.011365900747478008,
    -0.03392559662461281,
    -0.009882023558020592,
    -0.059401534497737885,
    0.04829884320497513,
    -0.01812785118818283,
    -0.028664281591773033,
    -0.03509654477238655,
    0.07013403624296188,
    0.04584294185042381,
    0.014156314544379711,
    -0.021335553377866745,
    0.055982526391744614,
    -0.03641488403081894,
    0.021475624293088913,
    0.02828313782811165,
    0.07515907287597656,
    0.02309323288500309,
    -0.02482723630964756,
    0.025612851604819298,
    -0.027681920677423477,
    -0.017110321670770645,
    -0.0013274577213451266,
    0.00621031504124403,
    -0.00965629518032074,
    0.013388905674219131,
    -0.023007318377494812,
    0.044734884053468704,
    -0.01753484643995762,
    -0.011397752910852432,
    0.05171021446585655,
    0.014278845861554146,
    -0.018284518271684647,
    0.013994112610816956,
    -0.0017606753390282393,
    -0.012443452142179012,
    0.023994630202651024,
    0.010704671032726765,
    -0.0072905318811535835,
    0.006349066272377968,
    -0.0657520666718483,
    -0.01723077893257141,
    0.037711042910814285,
    0.0059791188687086105,
    0.03449691832065582,
    -0.0035237823612987995,
    0.01100719254463911,
    -0.021239567548036575,
    -0.03482864052057266,
    0.01344599574804306,
    -0.039179522544145584,
    -0.022759685292840004,
    0.006484614219516516,
    0.0028758628759533167,
    0.05114948749542236,
    0.015134034678339958,
    -0.013416161760687828,
    -0.012713299132883549,
    -0.011823941953480244,
    0.010000052861869335,
    0.025491664186120033,
    0.007481037639081478,
    0.010407018475234509,
    -0.00003492357427603565,
    0.005478284787386656,
    -0.008798856288194656,
    -0.03087942861020565,
    -0.01903599128127098,
    -0.13376547396183014,
    -0.03279629722237587,
    0.010101058520376682,
    0.020362287759780884,
    0.019855940714478493,
    0.01261645182967186,
    -0.0312999002635479,
    -0.04447781667113304,
    -0.029486188665032387,
    -0.027310719713568687,
    -0.05730614438652992,
    0.02623618394136429,
    -0.04794205352663994,
    0.025519559159874916,
    -0.007466648239642382,
    0.005933987908065319,
    -0.010922391898930073,
    -0.020365620031952858,
    0.0515684075653553,
    -0.022805796936154366,
    0.029080292209982872,
    0.014644570648670197,
    0.021400904282927513,
    -0.025250516831874847,
    -0.03554393723607063,
    0.0016702789580449462,
    -0.023499758914113045,
    -0.017987504601478577,
    0.0020480600651353598,
    -0.03799885883927345,
    -0.006683998741209507,
    -0.03660124912858009,
    0.022644687443971634,
    0.0834549069404602,
    0.023468172177672386,
    -0.006819538772106171,
    0.061715565621852875,
    0.028194885700941086,
    -0.004654956050217152,
    -0.010003957897424698,
    -0.00005061341289547272,
    -0.0023757966700941324,
    -0.05553790554404259,
    0.02604002133011818,
    0.0036660139448940754,
    -0.026173489168286324,
    0.003491978393867612,
    -0.007679200265556574,
    -0.01197785884141922,
    -0.0020945824217051268,
    0.00029760971665382385,
    -0.011862729676067829,
    -0.015706747770309448,
    -0.04017418250441551,
    0.015279495157301426,
    0.003833705559372902,
    0.00947582721710205,
    -0.047055382281541824,
    0.029943468049168587,
    0.021550782024860382,
    0.009478166699409485,
    -0.0032884269021451473,
    -0.026789790019392967,
    0.023221688345074654,
    -0.02318638376891613,
    0.00031856188434176147,
    -0.04192010313272476,
    0.03448307886719704,
    0.06530343741178513,
    0.018829867243766785,
    -0.01137002557516098,
    -0.01353366021066904,
    0.004584462381899357,
    -0.027433229610323906,
    0.043646086007356644,
    -0.00006318911619018763,
    -0.06711689382791519,
    -0.06013110280036926,
    0.01665198802947998,
    0.015241812914609909,
    -0.03894742205739021,
    0.000017173395463032648,
    0.06673330068588257,
    -0.013314434327185154,
    0.04036800190806389,
    0.028693774715065956,
    0.08326878398656845,
    -0.02462153695523739,
    -0.012117038480937481,
    -0.025405865162611008,
    -0.1126750186085701,
    -0.032398492097854614,
    -0.02293866127729416,
    0.010238444432616234,
    0.01080967579036951,
    0.040943045169115067,
    -0.009326395578682423,
    -0.03753041476011276,
    0.005021507851779461,
    0.021334750577807426,
    -0.018623538315296173,
    0.022765519097447395,
    0.028013847768306732,
    0.04071340337395668,
    0.020203744992613792,
    0.03737592697143555,
    0.052277978509664536,
    0.0373358316719532,
    0.027802705764770508,
    -0.023612186312675476,
    -0.03401472792029381,
    0.008234468288719654,
    -0.056131307035684586,
    0.008252984844148159,
    -0.03877267614006996,
    0.012900834903120995,
    -0.020700400695204735,
    0.03178335353732109,
    0.00817579310387373,
    -0.03244250640273094,
    0.009934162721037865,
    -0.01852734014391899,
    0.002894812962040305,
    0.005801774095743895,
    0.02778705023229122,
    0.007685168646275997,
    0.010199387557804585,
    -0.0008301089983433485,
    0.006182811688631773,
    0.023410337045788765,
    -0.013643192127346992,
    -0.02525225467979908,
    0.028885051608085632,
    0.00887671485543251,
    0.0114450603723526,
    -0.04033012315630913,
    -0.007514965254813433,
    0.011392956599593163,
    -0.5166805982589722,
    0.0021063208114355803,
    -0.007227636873722076,
    0.04257114231586456,
    0.011478927917778492,
    0.004652619361877441,
    0.040051721036434174,
    0.04745771735906601,
    -0.030233539640903473,
    0.010182659141719341,
    -0.013994313776493073,
    0.006542366463690996,
    -0.015234527178108692,
    -0.015380694530904293,
    -0.008631723932921886,
    -0.004133761394768953,
    0.02658991329371929,
    0.03586640581488609,
    -0.03315277397632599,
    0.007076135370880365,
    0.00568366190418601,
    0.03415358066558838,
    -0.043676022440195084,
    0.01247485727071762,
    0.03498683497309685,
    0.008138870820403099,
    0.0046898857690393925,
    0.002929125912487507,
    0.013556165620684624,
    0.006673017051070929,
    0.012827339582145214,
    -0.0015583086060360074,
    -0.006598080042749643,
    -0.023970549926161766,
    -0.0043109022080898285,
    0.03471841290593147,
    0.03837297856807709,
    -0.025150708854198456,
    0.030504196882247925,
    0.07396669685840607,
    0.04317791759967804,
    0.019098736345767975,
    0.028362659737467766,
    0.010390084236860275,
    -0.034811317920684814,
    0.13778619468212128,
    -0.020471910014748573,
    -0.0028044728096574545,
    -0.014835372567176819,
    0.013653136789798737,
    0.013671132735908031,
    -0.5177797675132751,
    -0.0468759760260582,
    -0.03942166268825531,
    0.05531357601284981,
    0.031671833246946335,
    0.011121980845928192,
    -0.047377809882164,
    0.03648669272661209,
    0.02171073853969574,
    -0.010617761872708797,
    0.003530799876898527,
    -0.007345391437411308,
    -0.016448359936475754,
    -0.000343320076353848,
    -0.00923861749470234,
    -0.04291892796754837,
    0.03432903811335564,
    0.01290331594645977,
    -0.07471118122339249,
    -0.0054681128822267056,
    0.0020480346865952015,
    -0.0018406868912279606,
    0.06044364348053932,
    0.03727881610393524,
    -0.013355941511690617,
    -0.04183478280901909,
    -0.0759548544883728,
    0.03265131637454033,
    0.11431452631950378,
    0.019895246252417564,
    0.028659997507929802,
    -0.016828084364533424,
    -0.05429006367921829,
    0.03005354478955269,
    -0.012176520191133022,
    0.007853548042476177,
    -0.008210666477680206,
    -0.03595183417201042,
    -0.005173762794584036,
    -0.018706878647208214,
    -0.025629783049225807,
    -0.009239324368536472,
    -0.012316297739744186,
    -0.02745678462088108,
    0.01018271129578352,
    0.024132803082466125,
    0.0374600812792778,
    -0.010335041210055351,
    0.027571208775043488,
    0.015795232728123665,
    -0.021556371822953224,
    -0.021324660629034042,
    0.017973748967051506,
    -0.016899099573493004,
    -0.00103299121838063,
    0.04236473888158798,
    -0.017182588577270508,
    0.02425081841647625,
    -0.014773812144994736,
    0.03656081110239029,
    0.003511951770633459,
    -0.043212540447711945,
    -0.015790294855833054,
    -0.030645377933979034,
    -0.004451989196240902,
    0.03040633723139763,
    0.01632235385477543,
    -0.011913620866835117,
    -0.00812787190079689,
    0.005444468930363655,
    -0.01289100106805563,
    0.02892724610865116,
    0.024938907474279404,
    -0.015983400866389275,
    0.03856213763356209,
    0.010078311897814274,
    -0.020197207108139992,
    0.00702672591432929,
    -0.010204050689935684,
    0.022665373980998993,
    0.029799489304423332,
    -0.0215110182762146,
    0.0018780040554702282,
    -0.011411279439926147,
    0.008374183438718319,
    0.020149199292063713,
    0.0670870840549469,
    0.04782012104988098,
    -0.010944126173853874,
    -0.02156958356499672,
    0.014550751075148582,
    -0.0025544401723891497,
    -0.06599319726228714,
    0.046437859535217285,
    -0.02725774236023426,
    -0.019396036863327026,
    0.01646474190056324,
    0.02106468193233013,
    0.006304173730313778,
    -0.004906030837446451,
    0.033905450254678726,
    -0.02669609896838665,
    0.07205513119697571,
    0.031366944313049316,
    0.012041310779750347,
    -0.004961270838975906,
    0.0524749718606472,
    0.014619890600442886,
    -0.0211497750133276,
    0.01777694560587406,
    0.00370989041402936,
    0.02337757684290409,
    -0.03845307603478432,
    -0.008889475837349892,
    0.0396849624812603,
    0.03422214463353157,
    -0.009893231093883514,
    0.007183610927313566,
    -0.0065202913247048855,
    -0.04717632010579109,
    -0.010841467417776585,
    -0.005984473042190075,
    -0.031242208555340767,
    0.04345695301890373,
    -0.025389233604073524,
    -0.014266492798924446,
    0.001598227652721107,
    0.002905547386035323,
    0.008721882477402687,
    0.05227603763341904,
    -0.005291008856147528,
    0.010452129878103733,
    0.02677205577492714,
    -0.010830894112586975,
    -0.04726795852184296,
    -0.017638633027672768,
    0.013056641444563866,
    -0.014485075138509274,
    0.014338802546262741,
    -0.026976492255926132,
    -0.0038960513193160295,
    -0.0034580444917082787,
    0.03258621320128441,
    -0.010707404464483261,
    0.0127020925283432,
    0.012290826998651028,
    0.00618883827701211,
    -0.019134053960442543,
    -0.02831663005053997,
  ];
}

if (import.meta.main) {
  const result = await getTextEmbedding("Dragon", "mobileclip");
  console.log(JSON.stringify(result));
  // const modelName = "mobileclip";
  // let result: any = null;
  //
  // result = await getImageEmbedding(
  //   "./test_image.png",
  //   modelName as ModelOptions,
  // );
  // console.log(
  //   `Embedding created with ${modelName}. ${result.length} dimensions. First value: ${
  //     result[0]
  //   }`,
  // );
  //
  // result = await getImageEmbedding(
  //   "https://huggingface.co/datasets/Xenova/transformers.js-docs/resolve/main/football-match.jpg",
  //   modelName as ModelOptions,
  // );
  // console.log(
  //   `Embedding created with ${modelName}. ${result.length} dimensions. First value: ${
  //     result[0]
  //   }`,
  // );
  //
  // result = await getTextEmbedding(
  //   "Hello World!",
  //   modelName as ModelOptions,
  // );
  // console.log(
  //   `Embedding created with ${modelName}. ${result.length} dimensions. First value: ${
  //     result[0]
  //   }`,
  // );
}
